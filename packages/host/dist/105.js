(self.webpackChunk_application_host=self.webpackChunk_application_host||[]).push([[105],{105:(e,t,n)=>{"use strict";n.r(t);var o=n(579),l=n.n(o),a=n(675);const r={receive:new a.Subject,send:new a.Subject};r.receive.subscribe((e=>{console.log("HOST - Send",e)})),r.send.subscribe((e=>{console.log("HOST - Receive",e)}));const c=r;var s=n(127);function i(e){const{ready:t,failed:o}=(e=>{const[t,n]=l().useState(!1),[o,a]=l().useState(!1);return l().useEffect((()=>{if(!e.url)return;const t=document.createElement("script");return t.src=e.url,t.type="text/javascript",t.async=!0,n(!1),a(!1),t.onload=()=>{console.log(`Dynamic Script Loaded: ${e.url}`),n(!0)},t.onerror=()=>{console.error(`Dynamic Script Error: ${e.url}`),n(!1),a(!0)},document.head.appendChild(t),()=>{console.log(`Dynamic Script Removed: ${e.url}`),document.head.removeChild(t)}}),[e.url]),{ready:t,failed:o}})({url:e.system&&e.system.url});if(!e.system)return l().createElement("h2",null,"Not system specified");if(!t)return l().createElement("h2",null,"Loading dynamic script: ",e.system.url);if(o)return l().createElement("h2",null,"Failed to load dynamic script: ",e.system.url);const a=l().lazy((r=e.system.scope,s=e.system.module,async()=>{await n.I("default");const e=window[r];return await e.init(n.S.default),(await window[r].get(s))()}));var r,s;return l().createElement(l().Suspense,{fallback:"Loading System"},l().createElement(a,{serviceComunication:c}))}const u=()=>{c.send.subscribe((n=>{t([...e,n])}));const[e,t]=l().useState([]);return l().createElement("ul",null,e.map((e=>l().createElement("li",{key:e.id},e.id," - ",e.app," - ",e.title))))},m=function(){const[e,t]=l().useState(void 0);return l().createElement("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'}},l().createElement("h1",null,"Dynamic System Host"),l().createElement("h1",null,"Host"),l().createElement("p",null,"The Dynamic System will take advantage Module Federation"," ",l().createElement("strong",null,"remotes")," and ",l().createElement("strong",null,"exposes"),". It will no load components that have been loaded already."),l().createElement("button",{onClick:function(){c.receive.next({id:(0,s.nanoid)(),app:"App1",title:"Nova Notificacao From App1",data:{}})}},"New Notification"),l().createElement("hr",null),l().createElement("button",{onClick:function(){t({url:"http://localhost:3002/1.0.0.remoteEntry.js",scope:"app1_1_0_0",module:"./App1"})}},"Load App 1 - V: 1.0.0"),l().createElement("button",{onClick:function(){t({url:"http://localhost:3002/1.1.0.remoteEntry.js",scope:"app1_1_1_0",module:"./App1"})}},"Load App 1 - V: 1.1.0"),l().createElement("button",{onClick:function(){t({url:"http://localhost:3002/1.2.0.remoteEntry.js",scope:"app1_1_2_0",module:"./App1"})}},"Load App 1 - V: 1.2.0"),l().createElement("button",{onClick:function(){t({url:"http://localhost:3002/remoteEntry.js",scope:"app1__REMOTE_VERSION__",module:"./App1"})}},"Load App 1 - V: latest"),l().createElement("div",{style:{marginTop:"2em"}},l().createElement(i,{system:e})),l().createElement(u,null))};var p=n(201);n.n(p)().render(l().createElement(m,null),document.getElementById("root"))}}]);