(self.webpackChunk_application_host=self.webpackChunk_application_host||[]).push([[75],{75:(t,e,r)=>{"use strict";r.r(e);var n=r(950),o=r.n(n),i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function a(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t}function l(t){return"function"==typeof t}function p(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Object.create,Object.create;var f=p((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function d(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var h=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}var e;return t.prototype.unsubscribe=function(){var t,e,r,n,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var s=u(i),p=s.next();!p.done;p=s.next())p.value.remove(this)}catch(e){t={error:e}}finally{try{p&&!p.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}else i.remove(this);var d=this.initialTeardown;if(l(d))try{d()}catch(t){o=t instanceof f?t.errors:[t]}var h=this._teardowns;if(h){this._teardowns=null;try{for(var v=u(h),y=v.next();!y.done;y=v.next()){var m=y.value;try{b(m)}catch(t){o=null!=o?o:[],t instanceof f?o=a(a([],c(o)),c(t.errors)):o.push(t)}}}catch(t){r={error:t}}finally{try{y&&!y.done&&(n=v.return)&&n.call(v)}finally{if(r)throw r.error}}}if(o)throw new f(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)b(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&d(e,t)},t.prototype.remove=function(e){var r=this._teardowns;r&&d(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),v=h.EMPTY;function y(t){return t instanceof h||t&&"closed"in t&&l(t.remove)&&l(t.add)&&l(t.unsubscribe)}function b(t){l(t)?t():t.unsubscribe()}var m=null,w=null,_=void 0,S=!1,g=!1,E={setTimeout:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=E.delegate;return((null==r?void 0:r.setTimeout)||setTimeout).apply(void 0,a([],c(t)))},clearTimeout:function(t){var e=E.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function x(t){E.setTimeout((function(){if(!m)throw t;m(t)}))}function T(){}var C=j("C",void 0,void 0);function j(t,e,r){return{kind:t,value:e,error:r}}var A=null;function O(t){if(S){var e=!A;if(e&&(A={errorThrown:!1,error:null}),t(),e){var r=A,n=r.errorThrown,o=r.error;if(A=null,n)throw o}}else t()}function k(t){S&&A&&(A.errorThrown=!0,A.error=t)}var P=function(t){function e(e){var r=t.call(this)||this;return r.isStopped=!1,e?(r.destination=e,y(e)&&e.add(r)):r.destination=D,r}return s(e,t),e.create=function(t,e,r){return new I(t,e,r)},e.prototype.next=function(t){this.isStopped?N(function(t){return j("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?N(j("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?N(C,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(h),I=function(t){function e(e,r,n){var o,i=t.call(this)||this;if(l(e))o=e;else if(e){var s;o=e.next,r=e.error,n=e.complete,i&&g?(s=Object.create(e)).unsubscribe=function(){return i.unsubscribe()}:s=e,o=null==o?void 0:o.bind(s),r=null==r?void 0:r.bind(s),n=null==n?void 0:n.bind(s)}return i.destination={next:o?F(o):T,error:F(null!=r?r:U),complete:n?F(n):T},i}return s(e,t),e}(P);function F(t,e){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];try{t.apply(void 0,a([],c(e)))}catch(t){S?k(t):x(t)}}}function U(t){throw t}function N(t,e){var r=w;r&&E.setTimeout((function(){return r(t,e)}))}var D={closed:!0,next:T,error:U,complete:T},H="function"==typeof Symbol&&Symbol.observable||"@@observable";function L(t){return t}function M(t){return 0===t.length?L:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var R=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n,o=this,i=(n=t)&&n instanceof P||function(t){return t&&l(t.next)&&l(t.error)&&l(t.complete)}(n)&&y(n)?t:new I(t,e,r);return O((function(){var t=o,e=t.operator,r=t.source;i.add(e?e.call(i,r):r?o._subscribe(i):o._trySubscribe(i))})),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=z(e))((function(e,n){var o;o=r.subscribe((function(e){try{t(e)}catch(t){n(t),null==o||o.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[H]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length?M(t)(this):this},t.prototype.toPromise=function(t){var e=this;return new(t=z(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function z(t){var e;return null!==(e=null!=t?t:_)&&void 0!==e?e:Promise}var $=p((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),B=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return s(e,t),e.prototype.lift=function(t){var e=new Y(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new $},e.prototype.next=function(t){var e=this;O((function(){var r,n;if(e._throwIfClosed(),!e.isStopped){var o=e.observers.slice();try{for(var i=u(o),s=i.next();!s.done;s=i.next())s.value.next(t)}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}}))},e.prototype.error=function(t){var e=this;O((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var r=e.observers;r.length;)r.shift().error(t)}}))},e.prototype.complete=function(){var t=this;O((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,r=e.hasError,n=e.isStopped,o=e.observers;return r||n?v:(o.push(t),new h((function(){return d(o,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,r=e.hasError,n=e.thrownError,o=e.isStopped;r?t.error(n):o&&t.complete()},e.prototype.asObservable=function(){var t=new R;return t.source=this,t},e.create=function(t,e){return new Y(t,e)},e}(R),Y=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return s(e,t),e.prototype.next=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)},e.prototype.error=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:v},e}(B);const V={receive:new B,send:new B};V.receive.subscribe((t=>{console.log("HOST - Send",t)})),V.send.subscribe((t=>{console.log("HOST - Receive",t)}));const W=V;let q=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let n=63&r[t];e+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return e};function G(t){const{ready:e,failed:n}=(t=>{const[e,r]=o().useState(!1),[n,i]=o().useState(!1);return o().useEffect((()=>{if(!t.url)return;const e=document.createElement("script");return e.src=t.url,e.type="text/javascript",e.async=!0,r(!1),i(!1),e.onload=()=>{console.log(`Dynamic Script Loaded: ${t.url}`),r(!0)},e.onerror=()=>{console.error(`Dynamic Script Error: ${t.url}`),r(!1),i(!0)},document.head.appendChild(e),()=>{console.log(`Dynamic Script Removed: ${t.url}`),document.head.removeChild(e)}}),[t.url]),{ready:e,failed:n}})({url:t.system&&t.system.url});if(!t.system)return o().createElement("h2",null,"Not system specified");if(!e)return o().createElement("h2",null,"Loading dynamic script: ",t.system.url);if(n)return o().createElement("h2",null,"Failed to load dynamic script: ",t.system.url);const i=o().lazy((s=t.system.scope,u=t.system.module,async()=>{await r.I("default");const t=window[s];return await t.init(r.S.default),(await window[s].get(u))()}));var s,u;return o().createElement(o().Suspense,{fallback:"Loading System"},o().createElement(i,{serviceComunication:W}))}const J=()=>{W.send.subscribe((r=>{e([...t,r])}));const[t,e]=o().useState([]);return o().createElement("ul",null,t.map((t=>o().createElement("li",{key:t.id},t.id," - ",t.app," - ",t.title))))},K=function(){const[t,e]=o().useState(void 0);return o().createElement("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'}},o().createElement("h1",null,"Dynamic System Host"),o().createElement("h1",null,"Host"),o().createElement("p",null,"The Dynamic System will take advantage Module Federation"," ",o().createElement("strong",null,"remotes")," and ",o().createElement("strong",null,"exposes"),". It will no load components that have been loaded already."),o().createElement("button",{onClick:function(){W.receive.next({id:q(),app:"App1",title:"Nova Notificacao From App1",data:{}})}},"New Notification"),o().createElement("hr",null),o().createElement("button",{onClick:function(){e({url:"http://localhost:3002/remoteEntry.js",scope:"app1",module:"./App1"})}},"Load App 1 Widget"),o().createElement("div",{style:{marginTop:"2em"}},o().createElement(G,{system:t})),o().createElement(J,null))};var Q=r(181);r.n(Q)().render(o().createElement(K,null),document.getElementById("root"))}}]);